関数は以下のような流れになっている。
まず、syscallでgetdentsを呼び出す。
getdentsが成功した場合は読み込んだバイト数が返される。

bposは現在読み切る予定のbufの地点を表している。
そして、fileの名前がわかると、stat関数を呼び出し、その情報をまとめて取得する。

strmodeはパーミッションをls用の表記に変える関数である。

getdentsでファイルを読み出す際、manにはlinux_dirent型で受け取るように書いていたが、char型のbufferを作って受け取り、その構造体のサイズごとに引き出す方が、for loopを後ろで回すにあたっては効率がいいと考え、このような実装にした。


f_dr_judgeはファイルかディレクトリかを判別する関数である。

その他は、statで受け取った値をls -lの出力に合わせている部分である。
